# Flask è¡¨å•å¤„ç†ç¤ºä¾‹

ä¸€ä¸ªå®Œæ•´çš„ Flask è¡¨å•å¤„ç†ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•åˆ›å»ºå’Œå¤„ç†åŒ…å«å¤šç§è¡¨å•å…ƒç´ çš„è®¢å•ç³»ç»Ÿã€‚

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªé¥®æ–™è®¢å•ç³»ç»Ÿçš„ Flask åº”ç”¨ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Flask å¤„ç†åŒ…å«ä»¥ä¸‹è¡¨å•å…ƒç´ çš„ HTML è¡¨å•ï¼š

- âœ… å•è¡Œæ–‡å­—è¾“å…¥æ ä½ï¼ˆText Inputï¼‰
- âœ… å•é€‰åœ†é’®ï¼ˆRadio Buttonsï¼‰
- âœ… æ ¸å–æ–¹å—ï¼ˆCheckboxesï¼‰
- âœ… ä¸‹æ‹‰å¼é€‰å•ï¼ˆDropdown/Selectï¼‰

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ¨ ç¾è§‚çš„è¡¨å•ç•Œé¢
- ğŸ“ å®Œæ•´çš„è¡¨å•éªŒè¯
- ğŸ”„ è¡¨å•æ•°æ®å¤„ç†å’Œæ˜¾ç¤º
- ğŸ“± å“åº”å¼è®¾è®¡
- ğŸ¯ æ¸…æ™°çš„ç»“æœå±•ç¤ºé¡µé¢

## ğŸ“ é¡¹ç›®ç»“æ„

```
week_13/
â”‚
â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ requirements.txt           # Python ä¾èµ–åˆ—è¡¨
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ demo_form.py          # Flask åº”ç”¨ä¸»æ–‡ä»¶
    â”‚
    â””â”€â”€ templates/            # HTML æ¨¡æ¿ç›®å½•
        â”œâ”€â”€ tea_form.html     # è®¢å•è¡¨å•é¡µé¢ï¼ˆé¦–é¡µï¼‰
        â””â”€â”€ result.html       # è®¢å•ç»“æœé¡µé¢
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.7+
- pipï¼ˆPython åŒ…ç®¡ç†å™¨ï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®**

```bash
cd week_13
```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰**

```bash
# Windows
python -m venv venv
venv\Scripts\activate

# Linux/Mac
python3 -m venv venv
source venv/bin/activate
```

3. **å®‰è£…ä¾èµ–**

```bash
pip install -r requirements.txt
```

### è¿è¡Œåº”ç”¨

1. **è¿›å…¥é¡¹ç›®ç›®å½•**

```bash
cd src
```

2. **å¯åŠ¨ Flask æœåŠ¡å™¨**

```bash
python demo_form.py
```

3. **è®¿é—®åº”ç”¨**

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š
```
http://127.0.0.1:5000/
```

## ğŸ“– ä½¿ç”¨è¯´æ˜

### ç”¨æˆ·æµç¨‹

1. **è®¿é—®é¦–é¡µ**
   - æ‰“å¼€ `http://127.0.0.1:5000/`
   - æ˜¾ç¤ºè®¢å•è¡¨å•é¡µé¢

2. **å¡«å†™è®¢å•ä¿¡æ¯**
   - è¾“å…¥å§“åï¼ˆå¤§åï¼‰
   - é€‰æ‹©ç”œåº¦ï¼šæ­£å¸¸ / ä¸­ç³– / å¾®ç³–
   - é€‰æ‹©åŠ æ–™ï¼šç™¾é¦™æœ / è”æ / èŠ‹å¤´ / èŠ’æœï¼ˆå¯å¤šé€‰ï¼‰
   - é€‰æ‹©åŒºåŸŸï¼šåŒ—åŒº / ä¸­åŒº / è¥¿åŒº / ä¸œåŒº / å—åŒº

3. **æäº¤è¡¨å•**
   - ç‚¹å‡»"é€å‡º"æŒ‰é’®æäº¤è®¢å•
   - ç‚¹å‡»"é‡è®¾"æŒ‰é’®æ¸…ç©ºè¡¨å•

4. **æŸ¥çœ‹ç»“æœ**
   - è‡ªåŠ¨è·³è½¬åˆ°è®¢å•ç¡®è®¤é¡µé¢
   - æ˜¾ç¤ºæ‰€æœ‰è®¢å•ä¿¡æ¯
   - å¯ä»¥ç‚¹å‡»"è¿”å›è®¢å•è¡¨å•"å›åˆ°é¦–é¡µ

## ğŸ’» ä»£ç è¯´æ˜

### è·¯ç”±é…ç½®

#### é¦–é¡µè·¯ç”± `/`

```python
@app.route('/')
def tea():
    """é¡¯ç¤ºé£²æ–™è¨‚å–®è¡¨å–®"""
    return render_template('tea_form.html')
```

- æ˜¾ç¤ºè®¢å•è¡¨å•é¡µé¢
- ç”¨æˆ·åœ¨è¿™é‡Œå¡«å†™è®¢å•ä¿¡æ¯

#### è¡¨å•å¤„ç†è·¯ç”± `/order`

```python
@app.route('/order', methods=['POST'])
def order():
    """è™•ç†è¡¨å–®æäº¤"""
    user = request.form['user']        # å¤§å
    sugar = request.form.get('sugar')  # ç”œåº¦
    area = request.form['area']        # å€åŸŸ
    mix = request.form.getlist('mix')  # åŠ æ–™ï¼ˆå¯èƒ½æœ‰å¤šå€‹å€¼ï¼‰
    
    return render_template("result.html",
                          user=user,
                          sugar=sugar,
                          mix=mix,
                          area=area)
```

- æ¥æ”¶ POST è¯·æ±‚ï¼ˆè¡¨å•æäº¤ï¼‰
- è§£æè¡¨å•æ•°æ®
- å°†æ•°æ®ä¼ é€’ç»™ç»“æœé¡µé¢æ¨¡æ¿

### è¡¨å•æ•°æ®å¤„ç†æ–¹æ³•

| æ–¹æ³• | ç”¨é€” | ç¤ºä¾‹ |
|------|------|------|
| `request.form['key']` | è·å–å•ä¸ªå€¼ï¼ˆå¿…éœ€å­—æ®µï¼‰ | `request.form['user']` |
| `request.form.get('key')` | è·å–å•ä¸ªå€¼ï¼ˆå¯é€‰å­—æ®µï¼‰ | `request.form.get('sugar')` |
| `request.form.getlist('key')` | è·å–å¤šä¸ªå€¼ï¼ˆå¤é€‰æ¡†ç­‰ï¼‰ | `request.form.getlist('mix')` |

### æ¨¡æ¿æ–‡ä»¶

#### `tea_form.html` - è¡¨å•é¡µé¢

åŒ…å«å®Œæ•´çš„ HTML è¡¨å•ï¼š
- å•è¡Œæ–‡å­—è¾“å…¥ï¼š`<input type="text">`
- å•é€‰æŒ‰é’®ï¼š`<input type="radio">`
- å¤é€‰æ¡†ï¼š`<input type="checkbox">`
- ä¸‹æ‹‰èœå•ï¼š`<select>`

#### `result.html` - ç»“æœé¡µé¢

ä½¿ç”¨ Jinja2 æ¨¡æ¿è¯­æ³•æ˜¾ç¤ºç»“æœï¼š
- å˜é‡è¾“å‡ºï¼š`{{ user }}`
- æ¡ä»¶åˆ¤æ–­ï¼š`{% if ... %}`
- å¾ªç¯éå†ï¼š`{% for item in mix %}`

## ğŸ“š å­¦ä¹ è¦ç‚¹

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†ä»¥ä¸‹ Flask æ ¸å¿ƒæ¦‚å¿µï¼š

### 1. è·¯ç”±è£…é¥°å™¨

```python
@app.route('/')              # GET è¯·æ±‚ï¼ˆé»˜è®¤ï¼‰
@app.route('/order', methods=['POST'])  # POST è¯·æ±‚
```

### 2. æ¨¡æ¿æ¸²æŸ“

```python
render_template('template.html', variable=value)
```

### 3. è¡¨å•æ•°æ®è·å–

```python
from flask import request

# è·å–è¡¨å•æ•°æ®
request.form['key']           # å•ä¸ªå€¼ï¼ˆå¿…éœ€ï¼‰
request.form.get('key')       # å•ä¸ªå€¼ï¼ˆå¯é€‰ï¼‰
request.form.getlist('key')   # å¤šä¸ªå€¼
```

### 4. Jinja2 æ¨¡æ¿è¯­æ³•

```jinja2
{{ variable }}              # è¾“å‡ºå˜é‡
{% if condition %}          # æ¡ä»¶åˆ¤æ–­
{% for item in list %}      # å¾ªç¯
{% endif %}
{% endfor %}
```

## ğŸ”§ é…ç½®è¯´æ˜

### å¼€å‘æ¨¡å¼

å½“å‰é…ç½®ä½¿ç”¨ Flask å¼€å‘æœåŠ¡å™¨ï¼š

```python
app.run(debug=True)
```

- `debug=True`ï¼šå¯ç”¨è°ƒè¯•æ¨¡å¼
- ä»£ç ä¿®æ”¹åè‡ªåŠ¨é‡è½½
- æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ï¼š

- **WSGI æœåŠ¡å™¨**ï¼šGunicorn æˆ– uWSGI
- **åå‘ä»£ç†**ï¼šNginx
- **å…³é—­è°ƒè¯•æ¨¡å¼**ï¼š`debug=False`

```bash
# ä½¿ç”¨ Gunicorn è¿è¡Œ
pip install gunicorn
gunicorn -w 4 -b 127.0.0.1:8000 demo_form:app
```

## ğŸ“¦ éƒ¨ç½²æ¸…å•

éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒéœ€è¦ä»¥ä¸‹æ–‡ä»¶ï¼š

```
âœ… demo_form.py              # Flask åº”ç”¨ä¸»æ–‡ä»¶
âœ… templates/                # æ¨¡æ¿ç›®å½•
â”‚   â”œâ”€â”€ tea_form.html       # è¡¨å•é¡µé¢
â”‚   â””â”€â”€ result.html         # ç»“æœé¡µé¢
âœ… requirements.txt          # ä¾èµ–åˆ—è¡¨
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. ç«¯å£å·²è¢«å ç”¨

å¦‚æœé‡åˆ°ç«¯å£ 5000 å·²è¢«å ç”¨ï¼š

```python
# ä¿®æ”¹ demo_form.py
app.run(debug=True, port=5001)  # ä½¿ç”¨å…¶ä»–ç«¯å£
```

### 2. æ¨¡å—æœªæ‰¾åˆ°é”™è¯¯

ç¡®ä¿å·²å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š

```bash
pip install -r requirements.txt
```

### 3. æ¨¡æ¿æ–‡ä»¶æœªæ‰¾åˆ°

ç¡®ä¿ `templates/` ç›®å½•ä¸ `demo_form.py` åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œæˆ–æ­£ç¡®è®¾ç½®äº†æ¨¡æ¿è·¯å¾„ã€‚

## ğŸ“ æ³¨æ„äº‹é¡¹

- âš ï¸ å¼€å‘æ¨¡å¼ä¸‹ `debug=True` ä»…ç”¨äºå¼€å‘ï¼Œä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨
- âš ï¸ è¡¨å•éªŒè¯éœ€è¦åœ¨å‰ç«¯å’Œåç«¯éƒ½è¿›è¡Œ
- âš ï¸ ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ HTTPS
- âš ï¸ å®é™…é¡¹ç›®ä¸­åº”è¯¥æ·»åŠ æ•°æ®åº“å­˜å‚¨è®¢å•æ•°æ®

## ğŸ”— ç›¸å…³èµ„æº

- [Flask å®˜æ–¹æ–‡æ¡£](https://flask.palletsprojects.com/)
- [Jinja2 æ¨¡æ¿æ–‡æ¡£](https://jinja.palletsprojects.com/)
- [HTML è¡¨å•å…ƒç´ ](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/form)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ä½¿ç”¨ã€‚

## ğŸ‘¨â€ğŸ’» ä½œè€…

Flask å­¦ä¹ ç¤ºä¾‹é¡¹ç›®

---

**ç¥å­¦ä¹ æ„‰å¿«ï¼** ğŸ‰

